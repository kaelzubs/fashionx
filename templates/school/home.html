{% extends 'school/base.html' %}
{% block content %}
<div class="jumbotron text-center" style="
  background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('/static/img/tailoring.jpg');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  background-repeat: no-repeat;
  color: white;
  min-height: 400px;
  display: block;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
">
  <h1 class="display-4">Craft Your Future in Fashion</h1>
  <p class="lead">Hands-on tailoring education led by industry pros.</p>
  <a href="{% url 'school:program_list' %}" class="btn btn-primary btn-lg">Explore Programs</a>
</div>

<h2 class="mb-3">Featured Programs</h2>
<div class="row">
  {% for p in programs %}
  <div class="col-md-4 mb-4">
    <div class="card h-100">
      {% if p.cover_image %}
      <img class="card-img-top" src="{{ p.cover_image.url }}" alt="{{ p.title }}">
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ p.title }}</h5>
        <p class="card-text">{{ p.description|truncatewords:25 }}</p>
      </div>
      <div class="card-footer bg-white">
        <a href="{% url 'school:program_detail' p.slug %}" class="btn btn-outline-primary btn-block">View details</a>
      </div>
    </div>
  </div>
  {% empty %}
  <p>No programs available yet.</p>
  {% endfor %}
</div>

<h2 class="mt-5 mb-3">Student Portfolio</h2>
<div class="row">
  {% for pr in projects %}
  <div class="col-md-3 mb-4">
    <div class="card">
      <img class="card-img-top" src="{{ pr.image.url }}" alt="{{ pr.title }}">
      <div class="card-body">
        <strong>{{ pr.title }}</strong>
        <p class="mb-0 text-muted">{{ pr.student_name }}</p>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<h2 class="mt-5 mb-3">Testimonials</h2>
<div class="row">
  {% for t in testimonials %}
  <div class="col-md-4 mb-4">
    <div class="card h-100">
      <div class="card-body">
        <p class="mb-2">“{{ t.message }}”</p>
        <small class="text-muted">— {{ t.name }} · {{ t.rating }}/5</small>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<h2 class="mt-5 mb-3">Upcoming Events</h2>
<ul class="list-group">
  {% for e in events %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <span>
      <a href="{% url 'school:event_detail' e.slug %}"><strong>{{ e.title }}</strong></a>
      <small class="text-muted d-block">{{ e.location }} · {{ e.date }}</small>
    </span>
    {% if e.is_open %}
    <span class="badge badge-success badge-pill">Open</span>
    {% else %}
    <span class="badge badge-secondary badge-pill">Closed</span>
    {% endif %}
  </li>
  {% empty %}
  <li class="list-group-item">No events scheduled.</li>
  {% endfor %}
</ul>
{% endblock %}